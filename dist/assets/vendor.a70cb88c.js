var t=function(){return(t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var n=Object.keys,r=Array.isArray,i="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function o(t,e){return"object"!=typeof e||n(e).forEach((function(n){t[n]=e[n]})),t}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var s=Object.getPrototypeOf,a={}.hasOwnProperty;function u(t,e){return a.call(t,e)}function c(t,e){"function"==typeof e&&(e=e(s(t))),n(e).forEach((function(n){h(t,n,e[n])}))}var l=Object.defineProperty;function h(t,e,n,r){l(t,e,o(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function f(t){return{from:function(e){return t.prototype=Object.create(e.prototype),h(t.prototype,"constructor",t),{extend:c.bind(null,t.prototype)}}}}var d=Object.getOwnPropertyDescriptor;function p(t,e){var n;return d(t,e)||(n=s(t))&&p(n,e)}var v=[].slice;function y(t,e,n){return v.call(t,e,n)}function m(t,e){return e(t)}function g(t){if(!t)throw new Error("Assertion Failed")}function b(t){i.setImmediate?setImmediate(t):setTimeout(t,0)}function w(t,e){return t.reduce((function(t,n,r){var i=e(n,r);return i&&(t[i[0]]=i[1]),t}),{})}function _(t,e){if(u(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,i=e.length;r<i;++r){var o=_(t,e[r]);n.push(o)}return n}var s=e.indexOf(".");if(-1!==s){var a=t[e.substr(0,s)];return void 0===a?void 0:_(a,e.substr(s+1))}}function x(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){g("string"!=typeof n&&"length"in n);for(var i=0,o=e.length;i<o;++i)x(t,e[i],n[i])}else{var s=e.indexOf(".");if(-1!==s){var a=e.substr(0,s),u=e.substr(s+1);if(""===u)void 0===n?r(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var c=t[a];c||(c=t[a]={}),x(c,u,n)}}else void 0===n?r(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function k(t,e){"string"==typeof e?x(t,e,void 0):"length"in e&&[].map.call(e,(function(e){x(t,e,void 0)}))}function S(t){var e={};for(var n in t)u(t,n)&&(e[n]=t[n]);return e}var P=[].concat;function E(t){return P.apply([],t)}var O="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(E([8,16,32,64].map((function(t){return["Int","Uint","Float"].map((function(e){return e+t+"Array"}))})))).filter((function(t){return i[t]})),A=O.map((function(t){return i[t]})),C=w(O,(function(t){return[t,!0]}));function j(t){if(!t||"object"!=typeof t)return t;var e;if(r(t)){e=[];for(var n=0,i=t.length;n<i;++n)e.push(j(t[n]))}else if(A.indexOf(t.constructor)>=0)e=t;else for(var o in e=t.constructor?Object.create(t.constructor.prototype):{},t)u(t,o)&&(e[o]=j(t[o]));return e}var T={}.toString;function K(t){return T.call(t).slice(8,-1)}var R=function(t,e){return"Array"===e?""+t.map((function(t){return R(t,K(t))})):"ArrayBuffer"===e?""+new Uint8Array(t):"Date"===e?t.getTime():ArrayBuffer.isView(t)?""+new Uint8Array(t.buffer):t};function I(t,e,r,i){return r=r||{},i=i||"",n(t).forEach((function(n){if(u(e,n)){var o=t[n],s=e[n];if("object"==typeof o&&"object"==typeof s&&o&&s){var a=K(o),c=K(s);a===c?C[a]?R(o,a)!==R(s,c)&&(r[i+n]=e[n]):I(o,s,r,i+n+"."):r[i+n]=e[n]}else o!==s&&(r[i+n]=e[n])}else r[i+n]=void 0})),n(e).forEach((function(n){u(t,n)||(r[i+n]=e[n])})),r}var B="undefined"!=typeof Symbol&&Symbol.iterator,D=B?function(t){var e;return null!=t&&(e=t[B])&&e.apply(t)}:function(){return null},N={};function M(t){var e,n,i,o;if(1===arguments.length){if(r(t))return t.slice();if(this===N&&"string"==typeof t)return[t];if(o=D(t)){for(n=[];!(i=o.next()).done;)n.push(i.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var F="undefined"!=typeof Symbol?function(t){return"AsyncFunction"===t[Symbol.toStringTag]}:function(){return!1},q="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function U(t,e){q=t,H=e}var H=function(){return!0},$=!new Error("").stack;function L(){if($)try{throw new Error}catch(t){return t}return new Error}function z(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(H).map((function(t){return"\n"+t})).join("")):""}var V=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],W=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(V),Y={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function G(t,e){this._e=L(),this.name=t,this.message=e}function Q(t,e){return t+". Errors: "+Object.keys(e).map((function(t){return e[t].toString()})).filter((function(t,e,n){return n.indexOf(t)===e})).join("\n")}function X(t,e,n,r){this._e=L(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Q(t,e)}function J(t,e){this._e=L(),this.name="BulkError",this.failures=e,this.message=Q(t,e)}f(G).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+z(this._e,2))}},toString:function(){return this.name+": "+this.message}}),f(X).from(G),f(J).from(G);var Z=W.reduce((function(t,e){return t[e]=e+"Error",t}),{}),tt=G,et=W.reduce((function(t,e){var n=e+"Error";function r(t,r){this._e=L(),this.name=n,t?"string"==typeof t?(this.message=t+(r?"\n "+r:""),this.inner=r||null):"object"==typeof t&&(this.message=t.name+" "+t.message,this.inner=t):(this.message=Y[e]||n,this.inner=null)}return f(r).from(tt),t[e]=r,t}),{});et.Syntax=SyntaxError,et.Type=TypeError,et.Range=RangeError;var nt=V.reduce((function(t,e){return t[e+"Error"]=et[e],t}),{});var rt=W.reduce((function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=et[e]),t}),{});function it(){}function ot(t){return t}function st(t,e){return null==t||t===ot?e:function(n){return e(t(n))}}function at(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function ut(t,e){return t===it?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?at(r,this.onsuccess):r),i&&(this.onerror=this.onerror?at(i,this.onerror):i),void 0!==o?o:n}}function ct(t,e){return t===it?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?at(n,this.onsuccess):n),r&&(this.onerror=this.onerror?at(r,this.onerror):r)}}function lt(t,e){return t===it?e:function(n){var r=t.apply(this,arguments);o(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?at(i,this.onsuccess):i),s&&(this.onerror=this.onerror?at(s,this.onerror):s),void 0===r?void 0===a?void 0:a:o(r,a)}}function ht(t,e){return t===it?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function ft(t,e){return t===it?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return e.apply(r,o)}))}return e.apply(this,arguments)}}rt.ModifyError=X,rt.DexieError=G,rt.BulkError=J;var dt={},pt="undefined"==typeof Promise?[]:function(){var t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,t.__proto__,t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,e.__proto__,t]}(),vt=pt[0],yt=pt[1],mt=pt[2],gt=yt&&yt.then,bt=vt&&vt.constructor,wt=!!mt,_t=!1,xt=mt?function(){mt.then(zt)}:i.setImmediate?setImmediate.bind(null,zt):i.MutationObserver?function(){var t=document.createElement("div");new MutationObserver((function(){zt(),t=null})).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(zt,0)},kt=function(t,e){Kt.push([t,e]),Pt&&(xt(),Pt=!1)},St=!0,Pt=!0,Et=[],Ot=[],At=null,Ct=ot,jt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ve,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(t){try{ve(t[0],t[1])}catch(e){}}))}},Tt=jt,Kt=[],Rt=0,It=[];function Bt(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=it,this._lib=!1;var e=this._PSD=Tt;if(q&&(this._stackHolder=L(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==dt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ft(this,this._value))}this._state=null,this._value=null,++e.ref,Mt(this,t)}var Dt={get:function(){var t=Tt,e=ee;function n(n,r){var i=this,o=!t.global&&(t!==Tt||e!==ee),s=o&&!oe(),a=new Bt((function(e,a){Ut(i,new Nt(de(n,t,o,s),de(r,t,o,s),e,a,t))}));return q&&Lt(a,this),a}return n.prototype=dt,n},set:function(t){h(this,"then",t&&t.prototype===dt?Dt:{get:function(){return t},set:Dt.set})}};function Nt(t,e,n,r,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=i}function Mt(t,e){try{e((function(e){if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Vt();e&&"function"==typeof e.then?Mt(t,(function(t,n){e instanceof Bt?e._then(t,n):e.then(t,n)})):(t._state=!0,t._value=e,qt(t)),n&&Wt()}}),Ft.bind(null,t))}catch(n){Ft(t,n)}}function Ft(t,e){if(Ot.push(e),null===t._state){var n=t._lib&&Vt();e=Ct(e),t._state=!1,t._value=e,q&&null!==e&&"object"==typeof e&&!e._promise&&function(t,e,n){try{t.apply(null,n)}catch(r){e&&e(r)}}((function(){var n=p(e,"stack");e._promise=t,h(e,"stack",{get:function(){return _t?n&&(n.get?n.get.apply(e):n.value):t.stack}})})),function(t){Et.some((function(e){return e._value===t._value}))||Et.push(t)}(t),qt(t),n&&Wt()}}function qt(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Ut(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),0===Rt&&(++Rt,kt((function(){0==--Rt&&Yt()}),[]))}function Ut(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Rt,kt(Ht,[n,t,e])}else t._listeners.push(e)}function Ht(t,e,n){try{At=e;var r,i=e._value;e._state?r=t(i):(Ot.length&&(Ot=[]),r=t(i),-1===Ot.indexOf(i)&&function(t){var e=Et.length;for(;e;)if(Et[--e]._value===t._value)return void Et.splice(e,1)}(e)),n.resolve(r)}catch(o){n.reject(o)}finally{At=null,0==--Rt&&Yt(),--n.psd.ref||n.psd.finalize()}}function $t(t,e,n){if(e.length===n)return e;var r="";if(!1===t._state){var i,o,s=t._value;null!=s?(i=s.name||"Error",o=s.message||s,r=z(s,0)):(i=s,o=""),e.push(i+(o?": "+o:"")+r)}return q&&((r=z(t._stackHolder,2))&&-1===e.indexOf(r)&&e.push(r),t._prev&&$t(t._prev,e,n)),e}function Lt(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function zt(){Vt()&&Wt()}function Vt(){var t=St;return St=!1,Pt=!1,t}function Wt(){var t,e,n;do{for(;Kt.length>0;)for(t=Kt,Kt=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(Kt.length>0);St=!0,Pt=!0}function Yt(){var t=Et;Et=[],t.forEach((function(t){t._PSD.onunhandled.call(null,t._value,t)}));for(var e=It.slice(0),n=e.length;n;)e[--n]()}function Gt(t){return new Bt(dt,!1,t)}function Qt(t,e){var n=Tt;return function(){var r=Vt(),i=Tt;try{return ce(n,!0),t.apply(this,arguments)}catch(o){e&&e(o)}finally{ce(i,!1),r&&Wt()}}}c(Bt.prototype,{then:Dt,_then:function(t,e){Ut(this,new Nt(null,null,t,e,Tt))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,(function(t){return t instanceof e?n(t):Gt(t)})):this.then(null,(function(t){return t&&t.name===e?n(t):Gt(t)}))},finally:function(t){return this.then((function(e){return t(),e}),(function(e){return t(),Gt(e)}))},stack:{get:function(){if(this._stack)return this._stack;try{_t=!0;var t=$t(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{_t=!1}}},timeout:function(t,e){var n=this;return t<1/0?new Bt((function(r,i){var o=setTimeout((function(){return i(new et.Timeout(e))}),t);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(Bt.prototype,Symbol.toStringTag,"Dexie.Promise"),jt.env=le(),c(Bt,{all:function(){var t=M.apply(null,arguments).map(se);return new Bt((function(e,n){0===t.length&&e([]);var r=t.length;t.forEach((function(i,o){return Bt.resolve(i).then((function(n){t[o]=n,--r||e(t)}),n)}))}))},resolve:function(t){if(t instanceof Bt)return t;if(t&&"function"==typeof t.then)return new Bt((function(e,n){t.then(e,n)}));var e=new Bt(dt,!0,t);return Lt(e,At),e},reject:Gt,race:function(){var t=M.apply(null,arguments).map(se);return new Bt((function(e,n){t.map((function(t){return Bt.resolve(t).then(e,n)}))}))},PSD:{get:function(){return Tt},set:function(t){return Tt=t}},totalEchoes:{get:function(){return ee}},newPSD:re,usePSD:he,scheduler:{get:function(){return kt},set:function(t){kt=t}},rejectionMapper:{get:function(){return Ct},set:function(t){Ct=t}},follow:function(t,e){return new Bt((function(n,r){return re((function(e,n){var r=Tt;r.unhandleds=[],r.onunhandled=n,r.finalize=at((function(){var t=this;!function(t){function e(){t(),It.splice(It.indexOf(e),1)}It.push(e),++Rt,kt((function(){0==--Rt&&Yt()}),[])}((function(){0===t.unhandleds.length?e():n(t.unhandleds[0])}))}),r.finalize),t()}),e,n,r)}))}}),bt&&(bt.allSettled&&h(Bt,"allSettled",(function(){var t=M.apply(null,arguments).map(se);return new Bt((function(e){0===t.length&&e([]);var n=t.length,r=new Array(n);t.forEach((function(t,i){return Bt.resolve(t).then((function(t){return r[i]={status:"fulfilled",value:t}}),(function(t){return r[i]={status:"rejected",reason:t}})).then((function(){return--n||e(r)}))}))}))})),bt.any&&"undefined"!=typeof AggregateError&&h(Bt,"any",(function(){var t=M.apply(null,arguments).map(se);return new Bt((function(e,n){0===t.length&&n(new AggregateError([]));var r=t.length,i=new Array(r);t.forEach((function(t,o){return Bt.resolve(t).then((function(t){return e(t)}),(function(t){i[o]=t,--r||n(new AggregateError(i))}))}))}))})));var Xt={awaits:0,echoes:0,id:0},Jt=0,Zt=[],te=0,ee=0,ne=0;function re(t,e,n,r){var i=Tt,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++ne;var a=jt.env;s.env=wt?{Promise:Bt,PromiseProp:{value:Bt,configurable:!0,writable:!0},all:Bt.all,race:Bt.race,allSettled:Bt.allSettled,any:Bt.any,resolve:Bt.resolve,reject:Bt.reject,nthen:pe(a.nthen,s),gthen:pe(a.gthen,s)}:{},e&&o(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=he(s,t,n,r);return 0===s.ref&&s.finalize(),u}function ie(){return Xt.id||(Xt.id=++Jt),++Xt.awaits,Xt.echoes+=100,Xt.id}function oe(){return!!Xt.awaits&&(0==--Xt.awaits&&(Xt.id=0),Xt.echoes=100*Xt.awaits,!0)}function se(t){return Xt.echoes&&t&&t.constructor===bt?(ie(),t.then((function(t){return oe(),t}),(function(t){return oe(),ye(t)}))):t}function ae(t){++ee,Xt.echoes&&0!=--Xt.echoes||(Xt.echoes=Xt.id=0),Zt.push(Tt),ce(t,!0)}function ue(){var t=Zt[Zt.length-1];Zt.pop(),ce(t,!1)}function ce(t,e){var n=Tt;if((e?!Xt.echoes||te++&&t===Tt:!te||--te&&t===Tt)||fe(e?ae.bind(null,t):ue),t!==Tt&&(Tt=t,n===jt&&(jt.env=le()),wt)){var r=jt.env.Promise,o=t.env;yt.then=o.nthen,r.prototype.then=o.gthen,(n.global||t.global)&&(Object.defineProperty(i,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function le(){var t=i.Promise;return wt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:yt.then,gthen:t.prototype.then}:{}}function he(t,e,n,r,i){var o=Tt;try{return ce(t,!0),e(n,r,i)}finally{ce(o,!1)}}function fe(t){gt.call(vt,t)}function de(t,e,n,r){return"function"!=typeof t?t:function(){var i=Tt;n&&ie(),ce(e,!0);try{return t.apply(this,arguments)}finally{ce(i,!1),r&&fe(oe)}}}function pe(t,e){return function(n,r){return t.call(this,de(n,e),de(r,e))}}-1===(""+gt).indexOf("[native code]")&&(ie=oe=it);function ve(t,e){var n;try{n=e.onuncatched(t)}catch(a){}if(!1!==n)try{var r,s={promise:e,reason:t};if(i.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),o(r,s)):i.CustomEvent&&o(r=new CustomEvent("unhandledrejection",{detail:s}),s),r&&i.dispatchEvent&&(dispatchEvent(r),!i.PromiseRejectionEvent&&i.onunhandledrejection))try{i.onunhandledrejection(r)}catch(u){}q&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch(a){}}var ye=Bt.reject;function me(t,e,n,r){if(t._state.openComplete||Tt.letThrough){var i=t._createTransaction(e,n,t._dbSchema);try{i.create()}catch(o){return ye(o)}return i._promise(e,(function(t,e){return re((function(){return Tt.trans=i,r(t,e,i)}))})).then((function(t){return i._completion.then((function(){return t}))}))}if(!t._state.isBeingOpened){if(!t._options.autoOpen)return ye(new et.DatabaseClosed);t.open().catch(it)}return t._state.dbReadyPromise.then((function(){return me(t,e,n,r)}))}var ge=String.fromCharCode(65535),be="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",we=[],_e="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),xe=_e,ke=_e,Se=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)};function Pe(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Ee={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Oe(t){return function(e){return void 0===_(e,t)&&k(e=j(e),t),e}}var Ae=function(){function t(){}return t.prototype._trans=function(t,e,n){var r=this._tx||Tt.trans,i=this.name;function o(t,n,r){if(!r.schema[i])throw new et.NotFound("Table "+i+" not part of transaction");return e(r.idbtrans,r)}var s=Vt();try{return r&&r.db===this.db?r===Tt.trans?r._promise(t,o,n):re((function(){return r._promise(t,o,n)}),{trans:r,transless:Tt.transless||Tt}):me(this.db,t,[this.name],o)}finally{s&&Wt()}},t.prototype.get=function(t,e){var n=this;return t&&t.constructor===Object?this.where(t).first(e):this._trans("readonly",(function(e){return n.core.get({trans:e,key:t}).then((function(t){return n.hook.reading.fire(t)}))})).then(e)},t.prototype.where=function(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(r(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var e=n(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter((function(t){return t.compound&&e.every((function(e){return t.keyPath.indexOf(e)>=0}))&&t.keyPath.every((function(t){return e.indexOf(t)>=0}))}))[0];if(i&&this.db._maxKey!==ge)return this.where(i.name).equals(i.keyPath.map((function(e){return t[e]})));!i&&q&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a compound index ["+e.join("+")+"]");var o=this.schema.idxByName,s=this.db._deps.indexedDB;function a(t,e){try{return 0===s.cmp(t,e)}catch(n){return!1}}var u=e.reduce((function(e,n){var i=e[0],s=e[1],u=o[n],c=t[n];return[i||u,i||!u?Pe(s,u&&u.multi?function(t){var e=_(t,n);return r(e)&&e.some((function(t){return a(c,t)}))}:function(t){return a(c,_(t,n))}):s]}),[null,null]),c=u[0],l=u[1];return c?this.where(c.name).equals(t[c.keyPath]).filter(l):i?this.filter(l):this.where(e).equals("")},t.prototype.filter=function(t){return this.toCollection().and(t)},t.prototype.count=function(t){return this.toCollection().count(t)},t.prototype.offset=function(t){return this.toCollection().offset(t)},t.prototype.limit=function(t){return this.toCollection().limit(t)},t.prototype.each=function(t){return this.toCollection().each(t)},t.prototype.toArray=function(t){return this.toCollection().toArray(t)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,r(t)?"["+t.join("+")+"]":t))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(t){this.schema.mappedClass=t;var e=function(e){if(!e)return e;var n=Object.create(t.prototype);for(var r in e)if(u(e,r))try{n[r]=e[r]}catch(i){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=e,this.hook("reading",e),t},t.prototype.defineClass=function(){return this.mapToClass((function(t){o(this,t)}))},t.prototype.add=function(t,e){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,s=t;return o&&i&&(s=Oe(o)(t)),this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[s]})})).then((function(t){return t.numFailures?Bt.reject(t.failures[0]):t.lastResult})).then((function(e){if(o)try{x(t,o,e)}catch(n){}return e}))},t.prototype.update=function(t,e){if("object"!=typeof e||r(e))throw new et.InvalidArgument("Modifications must be an object.");if("object"!=typeof t||r(t))return this.where(":id").equals(t).modify(e);n(e).forEach((function(n){x(t,n,e[n])}));var i=_(t,this.schema.primKey.keyPath);return void 0===i?ye(new et.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(e)},t.prototype.put=function(t,e){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,s=t;return o&&i&&(s=Oe(o)(t)),this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"put",values:[s],keys:null!=e?[e]:null})})).then((function(t){return t.numFailures?Bt.reject(t.failures[0]):t.lastResult})).then((function(e){if(o)try{x(t,o,e)}catch(n){}return e}))},t.prototype.delete=function(t){var e=this;return this._trans("readwrite",(function(n){return e.core.mutate({trans:n,type:"delete",keys:[t]})})).then((function(t){return t.numFailures?Bt.reject(t.failures[0]):void 0}))},t.prototype.clear=function(){var t=this;return this._trans("readwrite",(function(e){return t.core.mutate({trans:e,type:"deleteRange",range:Ee})})).then((function(t){return t.numFailures?Bt.reject(t.failures[0]):void 0}))},t.prototype.bulkGet=function(t){var e=this;return this._trans("readonly",(function(n){return e.core.getMany({keys:t,trans:n}).then((function(t){return t.map((function(t){return e.hook.reading.fire(t)}))}))}))},t.prototype.bulkAdd=function(t,e,n){var r=this,i=Array.isArray(e)?e:void 0,o=(n=n||(i?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",(function(e){var n=r.schema.primKey,s=n.auto,a=n.keyPath;if(a&&i)throw new et.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new et.InvalidArgument("Arguments objects and keys must have the same length");var u=t.length,c=a&&s?t.map(Oe(a)):t;return r.core.mutate({trans:e,type:"add",keys:i,values:c,wantResults:o}).then((function(t){var e=t.numFailures,n=t.results,i=t.lastResult,s=t.failures;if(0===e)return o?n:i;throw new J(r.name+".bulkAdd(): "+e+" of "+u+" operations failed",Object.keys(s).map((function(t){return s[t]})))}))}))},t.prototype.bulkPut=function(t,e,n){var r=this,i=Array.isArray(e)?e:void 0,o=(n=n||(i?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",(function(e){var n=r.schema.primKey,s=n.auto,a=n.keyPath;if(a&&i)throw new et.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new et.InvalidArgument("Arguments objects and keys must have the same length");var u=t.length,c=a&&s?t.map(Oe(a)):t;return r.core.mutate({trans:e,type:"put",keys:i,values:c,wantResults:o}).then((function(t){var e=t.numFailures,n=t.results,i=t.lastResult,s=t.failures;if(0===e)return o?n:i;throw new J(r.name+".bulkPut(): "+e+" of "+u+" operations failed",Object.keys(s).map((function(t){return s[t]})))}))}))},t.prototype.bulkDelete=function(t){var e=this,n=t.length;return this._trans("readwrite",(function(n){return e.core.mutate({trans:n,type:"delete",keys:t})})).then((function(t){var r=t.numFailures,i=t.lastResult,o=t.failures;if(0===r)return i;throw new J(e.name+".bulkDelete(): "+r+" of "+n+" operations failed",o)}))},t}();function Ce(t){var e={},i=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return e[n].subscribe.apply(null,o),t}if("string"==typeof n)return e[n]};i.addEventType=a;for(var o=1,s=arguments.length;o<s;++o)a(arguments[o]);return i;function a(t,n,r){if("object"==typeof t)return u(t);n||(n=ht),r||(r=it);var o={subscribers:[],fire:r,subscribe:function(t){-1===o.subscribers.indexOf(t)&&(o.subscribers.push(t),o.fire=n(o.fire,t))},unsubscribe:function(t){o.subscribers=o.subscribers.filter((function(e){return e!==t})),o.fire=o.subscribers.reduce(n,r)}};return e[t]=i[t]=o,o}function u(t){n(t).forEach((function(e){var n=t[e];if(r(n))a(e,t[e][0],t[e][1]);else{if("asap"!==n)throw new et.InvalidArgument("Invalid event config");var i=a(e,ot,(function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];i.subscribers.forEach((function(t){b((function(){t.apply(null,e)}))}))}))}}))}}function je(t,e){return f(e).from({prototype:t}),e}function Te(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Ke(t,e){t.filter=Pe(t.filter,e)}function Re(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Pe(r(),e())}:e,t.justLimit=n&&!r}function Ie(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new et.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Be(t,e,n){var r=Ie(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:r,range:t.range}})}function De(t,e,n,r){var i=t.replayFilter?Pe(t.filter,t.replayFilter()):t.filter;if(t.or){var o={},s=function(t,n,r){if(!i||i(n,r,(function(t){return n.stop(t)}),(function(t){return n.fail(t)}))){var s=n.primaryKey,a=""+s;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(s)),u(o,a)||(o[a]=!0,e(t,n,r))}};return Promise.all([t.or._iterate(s,n),Ne(Be(t,r,n),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}return Ne(Be(t,r,n),Pe(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function Ne(t,e,n,r){var i=Qt(r?function(t,e,i){return n(r(t),e,i)}:n);return t.then((function(t){if(t)return t.start((function(){var n=function(){return t.continue()};e&&!e(t,(function(t){return n=t}),(function(e){t.stop(e),n=it}),(function(e){t.fail(e),n=it}))||i(t.value,t,(function(t){return n=t})),n()}))}))}var Me=function(){function t(){}return t.prototype._read=function(t,e){var n=this._ctx;return n.error?n.table._trans(null,ye.bind(null,n.error)):n.table._trans("readonly",t).then(e)},t.prototype._write=function(t){var e=this._ctx;return e.error?e.table._trans(null,ye.bind(null,e.error)):e.table._trans("readwrite",t,"locked")},t.prototype._addAlgorithm=function(t){var e=this._ctx;e.algorithm=Pe(e.algorithm,t)},t.prototype._iterate=function(t,e){return De(this._ctx,t,e,this._ctx.table.core)},t.prototype.clone=function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&o(n,t),e._ctx=n,e},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(t){var e=this._ctx;return this._read((function(n){return De(e,t,n,e.table.core)}))},t.prototype.count=function(t){var e=this;return this._read((function(t){var n=e._ctx,r=n.table.core;if(Te(n,!0))return r.count({trans:t,query:{index:Ie(n,r.schema),range:n.range}}).then((function(t){return Math.min(t,n.limit)}));var i=0;return De(n,(function(){return++i,!1}),t,r).then((function(){return i}))})).then(t)},t.prototype.sortBy=function(t,e){var n=t.split(".").reverse(),r=n[0],i=n.length-1;function o(t,e){return e?o(t[n[e]],e-1):t[r]}var s="next"===this._ctx.dir?1:-1;function a(t,e){var n=o(t,i),r=o(e,i);return n<r?-s:n>r?s:0}return this.toArray((function(t){return t.sort(a)})).then(e)},t.prototype.toArray=function(t){var e=this;return this._read((function(t){var n=e._ctx;if("next"===n.dir&&Te(n,!0)&&n.limit>0){var r=n.valueMapper,i=Ie(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(t){var e=t.result;return r?e.map(r):e}))}var o=[];return De(n,(function(t){return o.push(t)}),t,n.table.core).then((function(){return o}))}),t)},t.prototype.offset=function(t){var e=this._ctx;return t<=0||(e.offset+=t,Te(e)?Re(e,(function(){var e=t;return function(t,n){return 0===e||(1===e?(--e,!1):(n((function(){t.advance(e),e=0})),!1))}})):Re(e,(function(){var e=t;return function(){return--e<0}}))),this},t.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Re(this._ctx,(function(){var e=t;return function(t,n,r){return--e<=0&&n(r),e>=0}}),!0),this},t.prototype.until=function(t,e){return Ke(this._ctx,(function(n,r,i){return!t(n.value)||(r(i),e)})),this},t.prototype.first=function(t){return this.limit(1).toArray((function(t){return t[0]})).then(t)},t.prototype.last=function(t){return this.reverse().first(t)},t.prototype.filter=function(t){var e,n;return Ke(this._ctx,(function(e){return t(e.value)})),e=this._ctx,n=t,e.isMatch=Pe(e.isMatch,n),this},t.prototype.and=function(t){return this.filter(t)},t.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},t.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.key,n)}))},t.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},t.prototype.eachPrimaryKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.primaryKey,n)}))},t.prototype.keys=function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.key)})).then((function(){return n})).then(t)},t.prototype.primaryKeys=function(t){var e=this._ctx;if("next"===e.dir&&Te(e,!0)&&e.limit>0)return this._read((function(t){var n=Ie(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:n,range:e.range}})})).then((function(t){return t.result})).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.primaryKey)})).then((function(){return n})).then(t)},t.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},t.prototype.firstKey=function(t){return this.limit(1).keys((function(t){return t[0]})).then(t)},t.prototype.lastKey=function(t){return this.reverse().firstKey(t)},t.prototype.distinct=function(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var n={};return Ke(this._ctx,(function(t){var e=t.primaryKey.toString(),r=u(n,e);return n[e]=!0,!r})),this},t.prototype.modify=function(t){var e=this,r=this._ctx;return this._write((function(i){var o;if("function"==typeof t)o=t;else{var s=n(t),a=s.length;o=function(e){for(var n=!1,r=0;r<a;++r){var i=s[r],o=t[i];_(e,i)!==o&&(x(e,i,o),n=!0)}return n}}var u=r.table.core,c=u.schema.primaryKey,l=c.outbound,h=c.extractKey,f="testmode"in jn?1:2e3,d=e.db.core.cmp,p=[],v=0,y=[],m=function(t,e){var r=e.failures,i=e.numFailures;v+=t-i;for(var o=0,s=n(r);o<s.length;o++){var a=s[o];p.push(r[a])}};return e.clone().primaryKeys().then((function(t){var e=function(n){var r=Math.min(f,t.length-n);return u.getMany({trans:i,keys:t.slice(n,n+r)}).then((function(s){for(var a=[],c=[],p=l?[]:null,v=[],y=0;y<r;++y){var g=s[y],b={value:j(g),primKey:t[n+y]};!1!==o.call(b,b.value,b)&&(null==b.value?v.push(t[n+y]):l||0===d(h(g),h(b.value))?(c.push(b.value),l&&p.push(t[n+y])):(v.push(t[n+y]),a.push(b.value)))}return Promise.resolve(a.length>0&&u.mutate({trans:i,type:"add",values:a}).then((function(t){for(var e in t.failures)v.splice(parseInt(e),1);m(a.length,t)}))).then((function(t){return c.length>0&&u.mutate({trans:i,type:"put",keys:p,values:c}).then((function(t){return m(c.length,t)}))})).then((function(){return v.length>0&&u.mutate({trans:i,type:"delete",keys:v}).then((function(t){return m(v.length,t)}))})).then((function(){return t.length>n+r&&e(n+f)}))}))};return e(0).then((function(){if(p.length>0)throw new X("Error modifying one or more objects",p,v,y);return t.length}))}))}))},t.prototype.delete=function(){var t=this._ctx,e=t.range;return Te(t)&&(t.isPrimKey&&!ke||3===e.type)?this._write((function(n){var r=t.table.core.schema.primaryKey,i=e;return t.table.core.count({trans:n,query:{index:r,range:i}}).then((function(e){return t.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(t){var n=t.failures;t.lastResult,t.results;var r=t.numFailures;if(r)throw new X("Could not delete some values",Object.keys(n).map((function(t){return n[t]})),e-r);return e-r}))}))})):this.modify((function(t,e){return e.value=null}))},t}();function Fe(t,e){return t<e?-1:t===e?0:1}function qe(t,e){return t>e?-1:t===e?0:1}function Ue(t,e,n){var r=t instanceof We?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function He(t){return new t.Collection(t,(function(){return Ve("")})).limit(0)}function $e(t,e,n,r,i,o){for(var s=Math.min(t.length,r.length),a=-1,u=0;u<s;++u){var c=e[u];if(c!==r[u])return i(t[u],n[u])<0?t.substr(0,u)+n[u]+n.substr(u+1):i(t[u],r[u])<0?t.substr(0,u)+r[u]+n.substr(u+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;i(t[u],c)<0&&(a=u)}return s<r.length&&"next"===o?t+n.substr(t.length):s<t.length&&"prev"===o?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function Le(t,e,n,r){var i,o,s,a,u,c,l,h=n.length;if(!n.every((function(t){return"string"==typeof t})))return Ue(t,"String expected.");function f(t){i=function(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}(t),o=function(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}(t),s="next"===t?Fe:qe;var e=n.map((function(t){return{lower:o(t),upper:i(t)}})).sort((function(t,e){return s(t.lower,e.lower)}));a=e.map((function(t){return t.upper})),u=e.map((function(t){return t.lower})),c=t,l="next"===t?"":r}f("next");var d=new t.Collection(t,(function(){return ze(a[0],u[h-1]+r)}));d._ondirectionchange=function(t){f(t)};var p=0;return d._addAlgorithm((function(t,n,r){var i=t.key;if("string"!=typeof i)return!1;var f=o(i);if(e(f,u,p))return!0;for(var d=null,v=p;v<h;++v){var y=$e(i,f,a[v],u[v],s,c);null===y&&null===d?p=v+1:(null===d||s(d,y)>0)&&(d=y)}return n(null!==d?function(){t.continue(d+l)}:r),!1})),d}function ze(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Ve(t){return{type:1,lower:t,upper:t}}var We=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),t.prototype.between=function(t,e,n,r){n=!1!==n,r=!0===r;try{return this._cmp(t,e)>0||0===this._cmp(t,e)&&(n||r)&&(!n||!r)?He(this):new this.Collection(this,(function(){return ze(t,e,!n,!r)}))}catch(i){return Ue(this,be)}},t.prototype.equals=function(t){return null==t?Ue(this,be):new this.Collection(this,(function(){return Ve(t)}))},t.prototype.above=function(t){return null==t?Ue(this,be):new this.Collection(this,(function(){return ze(t,void 0,!0)}))},t.prototype.aboveOrEqual=function(t){return null==t?Ue(this,be):new this.Collection(this,(function(){return ze(t,void 0,!1)}))},t.prototype.below=function(t){return null==t?Ue(this,be):new this.Collection(this,(function(){return ze(void 0,t,!1,!0)}))},t.prototype.belowOrEqual=function(t){return null==t?Ue(this,be):new this.Collection(this,(function(){return ze(void 0,t)}))},t.prototype.startsWith=function(t){return"string"!=typeof t?Ue(this,"String expected."):this.between(t,t+ge,!0,!0)},t.prototype.startsWithIgnoreCase=function(t){return""===t?this.startsWith(t):Le(this,(function(t,e){return 0===t.indexOf(e[0])}),[t],ge)},t.prototype.equalsIgnoreCase=function(t){return Le(this,(function(t,e){return t===e[0]}),[t],"")},t.prototype.anyOfIgnoreCase=function(){var t=M.apply(N,arguments);return 0===t.length?He(this):Le(this,(function(t,e){return-1!==e.indexOf(t)}),t,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var t=M.apply(N,arguments);return 0===t.length?He(this):Le(this,(function(t,e){return e.some((function(e){return 0===t.indexOf(e)}))}),t,ge)},t.prototype.anyOf=function(){var t=this,e=M.apply(N,arguments),n=this._cmp;try{e.sort(n)}catch(o){return Ue(this,be)}if(0===e.length)return He(this);var r=new this.Collection(this,(function(){return ze(e[0],e[e.length-1])}));r._ondirectionchange=function(r){n="next"===r?t._ascending:t._descending,e.sort(n)};var i=0;return r._addAlgorithm((function(t,r,o){for(var s=t.key;n(s,e[i])>0;)if(++i===e.length)return r(o),!1;return 0===n(s,e[i])||(r((function(){t.continue(e[i])})),!1)})),r},t.prototype.notEqual=function(t){return this.inAnyRange([[-(1/0),t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var t=M.apply(N,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(n){return Ue(this,be)}var e=t.reduce((function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[-(1/0),e]]}),null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(t,e){var n=this,r=this._cmp,i=this._ascending,o=this._descending,s=this._min,a=this._max;if(0===t.length)return He(this);if(!t.every((function(t){return void 0!==t[0]&&void 0!==t[1]&&i(t[0],t[1])<=0})))return Ue(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",et.InvalidArgument);var u=!e||!1!==e.includeLowers,c=e&&!0===e.includeUppers;var l,h=i;function f(t,e){return h(t[0],e[0])}try{(l=t.reduce((function(t,e){for(var n=0,i=t.length;n<i;++n){var o=t[n];if(r(e[0],o[1])<0&&r(e[1],o[0])>0){o[0]=s(o[0],e[0]),o[1]=a(o[1],e[1]);break}}return n===i&&t.push(e),t}),[])).sort(f)}catch(g){return Ue(this,be)}var d=0,p=c?function(t){return i(t,l[d][1])>0}:function(t){return i(t,l[d][1])>=0},v=u?function(t){return o(t,l[d][0])>0}:function(t){return o(t,l[d][0])>=0};var y=p,m=new this.Collection(this,(function(){return ze(l[0][0],l[l.length-1][1],!u,!c)}));return m._ondirectionchange=function(t){"next"===t?(y=p,h=i):(y=v,h=o),l.sort(f)},m._addAlgorithm((function(t,e,r){for(var o=t.key;y(o);)if(++d===l.length)return e(r),!1;return!!function(t){return!p(t)&&!v(t)}(o)||(0===n._cmp(o,l[d][1])||0===n._cmp(o,l[d][0])||e((function(){h===i?t.continue(l[d][0]):t.continue(l[d][1])})),!1)})),m},t.prototype.startsWithAnyOf=function(){var t=M.apply(N,arguments);return t.every((function(t){return"string"==typeof t}))?0===t.length?He(this):this.inAnyRange(t.map((function(t){return[t,t+ge]}))):Ue(this,"startsWithAnyOf() only works with strings")},t}();function Ye(t){return 1===t.length?t[0]:t}function Ge(t){try{return t.only([[]]),[[]]}catch(e){return ge}}function Qe(t){return Qt((function(e){return Xe(e),t(e.target.error),!1}))}function Xe(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Je=function(){function t(){}return t.prototype._lock=function(){return g(!Tt.global),++this._reculock,1!==this._reculock||Tt.global||(Tt.lockOwnerFor=this),this},t.prototype._unlock=function(){if(g(!Tt.global),0==--this._reculock)for(Tt.global||(Tt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{he(t[1],t[0])}catch(e){}}return this},t.prototype._locked=function(){return this._reculock&&Tt.lockOwnerFor!==this},t.prototype.create=function(t){var e=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(g(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new et.DatabaseClosed(r);case"MissingAPIError":throw new et.MissingAPI(r.message,r);default:throw new et.OpenFailed(r)}if(!this.active)throw new et.TransactionInactive;return g(null===this._completion._state),(t=this.idbtrans=t||n.transaction(Ye(this.storeNames),this.mode)).onerror=Qt((function(n){Xe(n),e._reject(t.error)})),t.onabort=Qt((function(n){Xe(n),e.active&&e._reject(new et.Abort(t.error)),e.active=!1,e.on("abort").fire(n)})),t.oncomplete=Qt((function(){e.active=!1,e._resolve()})),this},t.prototype._promise=function(t,e,n){var r=this;if("readwrite"===t&&"readwrite"!==this.mode)return ye(new et.ReadOnly("Transaction is readonly"));if(!this.active)return ye(new et.TransactionInactive);if(this._locked())return new Bt((function(i,o){r._blockedFuncs.push([function(){r._promise(t,e,n).then(i,o)},Tt])}));if(n)return re((function(){var t=new Bt((function(t,n){r._lock();var i=e(t,n,r);i&&i.then&&i.then(t,n)}));return t.finally((function(){return r._unlock()})),t._lib=!0,t}));var i=new Bt((function(t,n){var i=e(t,n,r);i&&i.then&&i.then(t,n)}));return i._lib=!0,i},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(t){var e=this._root(),n=Bt.resolve(t);if(e._waitingFor)e._waitingFor=e._waitingFor.then((function(){return n}));else{e._waitingFor=n,e._waitingQueue=[];var r=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(r.get(-1/0).onsuccess=t)}()}var i=e._waitingFor;return new Bt((function(t,r){n.then((function(n){return e._waitingQueue.push(Qt(t.bind(null,n)))}),(function(t){return e._waitingQueue.push(Qt(r.bind(null,t)))})).finally((function(){e._waitingFor===i&&(e._waitingFor=null)}))}))},t.prototype.abort=function(){this.active&&this._reject(new et.Abort),this.active=!1},t.prototype.table=function(t){var e=this._memoizedTables||(this._memoizedTables={});if(u(e,t))return e[t];var n=this.schema[t];if(!n)throw new et.NotFound("Table "+t+" not part of transaction");var r=new this.db.Table(t,n,this);return r.core=this.db.core.table(t),e[t]=r,r},t}();function Ze(t,e,n,r,i,o,s){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+tn(e)}}function tn(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function en(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:w(n,(function(t){return[t.name,t]}))}}function nn(t){return null==t?function(){}:"string"==typeof t?function(t){return 1===t.split(".").length?function(e){return e[t]}:function(e){return _(e,t)}}(t):function(e){return _(e,t)}}function rn(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}function on(t){return[].slice.call(t)}var sn=0;function an(t){return null==t?":id":"string"==typeof t?t:"["+t.join("+")+"]"}function un(t,n,i,o){var s=n.cmp.bind(n);function a(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");var e=t.lower,n=t.upper,r=t.lowerOpen,o=t.upperOpen;return void 0===e?void 0===n?null:i.upperBound(n,!!o):void 0===n?i.lowerBound(e,!!r):i.bound(e,n,!!r,!!o)}var u,c,l,h=(c=o,l=on((u=t).objectStoreNames),{schema:{name:u.name,tables:l.map((function(t){return c.objectStore(t)})).map((function(t){var e=t.keyPath,n=t.autoIncrement,i=r(e),o=null==e,s={},a={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:i,keyPath:e,autoIncrement:n,unique:!0,extractKey:nn(e)},indexes:on(t.indexNames).map((function(e){return t.index(e)})).map((function(t){var e=t.name,n=t.unique,i=t.multiEntry,o=t.keyPath,a={name:e,compound:r(o),keyPath:o,unique:n,multiEntry:i,extractKey:nn(o)};return s[an(o)]=a,a})),getIndexByKeyPath:function(t){return s[an(t)]}};return s[":id"]=a.primaryKey,null!=e&&(s[an(e)]=a.primaryKey),a}))},hasGetAll:l.length>0&&"getAll"in c.objectStore(l[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),f=h.schema,d=h.hasGetAll,p=f.tables.map((function(t){return function(t){var n,r=t.name;return{name:r,schema:t,mutate:function(n){var i=n.trans,o=n.type,s=n.keys,u=n.values,c=n.range,l=n.wantResults;return new Promise((function(n,h){n=Qt(n);var f=i.objectStore(r),d=null==f.keyPath,p="put"===o||"add"===o;if(!p&&"delete"!==o&&"deleteRange"!==o)throw new Error("Invalid operation type: "+o);var v=(s||u||{length:1}).length;if(s&&u&&s.length!==u.length)throw new Error("Given keys array must have same length as given values array.");if(0===v)return n({numFailures:0,failures:{},results:[],lastResult:void 0});var y,m=l&&e(s||rn(t.primaryKey,{type:o,keys:s,values:u})),g=[],b=0,w=function(t){++b,Xe(t),m&&(m[t.target._reqno]=void 0),g[t.target._reqno]=t.target.error},_=function(t){var e=t.target;m[e._reqno]=e.result};if("deleteRange"===o){if(4===c.type)return n({numFailures:b,failures:g,results:m,lastResult:void 0});y=3===c.type?f.clear():f.delete(a(c))}else{var x=p?d?[u,s]:[u,null]:[s,null],k=x[0],S=x[1];if(p)for(var P=0;P<v;++P)(y=S&&void 0!==S[P]?f[o](k[P],S[P]):f[o](k[P]))._reqno=P,m&&void 0===m[P]&&(y.onsuccess=_),y.onerror=w;else for(P=0;P<v;++P)(y=f[o](k[P]))._reqno=P,y.onerror=w}var E=function(t){var e=t.target.result;m&&(m[v-1]=e),n({numFailures:b,failures:g,results:m,lastResult:e})};y.onerror=function(t){w(t),E(t)},y.onsuccess=E}))},getMany:function(t){var e=t.trans,n=t.keys;return new Promise((function(t,i){t=Qt(t);for(var o,s=e.objectStore(r),a=n.length,u=new Array(a),c=0,l=0,h=function(e){var n=e.target;u[n._pos]=n.result,++l===c&&t(u)},f=Qe(i),d=0;d<a;++d)null!=n[d]&&((o=s.get(n[d]))._pos=d,o.onsuccess=h,o.onerror=f,++c);0===c&&t(u)}))},get:function(t){var e=t.trans,n=t.key;return new Promise((function(t,i){t=Qt(t);var o=e.objectStore(r).get(n);o.onsuccess=function(e){return t(e.target.result)},o.onerror=Qe(i)}))},query:(n=d,function(t){return new Promise((function(e,i){e=Qt(e);var o=t.trans,s=t.values,u=t.limit,c=t.query,l=u===1/0?void 0:u,h=c.index,f=c.range,d=o.objectStore(r),p=h.isPrimaryKey?d:d.index(h.name),v=a(f);if(0===u)return e({result:[]});if(n){var y=s?p.getAll(v,l):p.getAllKeys(v,l);y.onsuccess=function(t){return e({result:t.target.result})},y.onerror=Qe(i)}else{var m=0,g=s||!("openKeyCursor"in p)?p.openCursor(v):p.openKeyCursor(v),b=[];g.onsuccess=function(t){var n=g.result;return n?(b.push(s?n.value:n.primaryKey),++m===u?e({result:b}):void n.continue()):e({result:b})},g.onerror=Qe(i)}}))}),openCursor:function(t){var e=t.trans,n=t.values,i=t.query,o=t.reverse,s=t.unique;return new Promise((function(t,u){t=Qt(t);var c=i.index,l=i.range,h=e.objectStore(r),f=c.isPrimaryKey?h:h.index(c.name),d=o?s?"prevunique":"prev":s?"nextunique":"next",p=n||!("openKeyCursor"in f)?f.openCursor(a(l),d):f.openKeyCursor(a(l),d);p.onerror=Qe(u),p.onsuccess=Qt((function(n){var r=p.result;if(r){r.___id=++sn,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var s=r.advance.bind(r),a=function(){throw new Error("Cursor not stopped")};r.trans=e,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=Qt(u),r.next=function(){var t=this,e=1;return this.start((function(){return e--?t.continue():t.stop()})).then((function(){return t}))},r.start=function(t){var e=new Promise((function(t,e){t=Qt(t),p.onerror=Qe(e),r.fail=e,r.stop=function(e){r.stop=r.continue=r.continuePrimaryKey=r.advance=a,t(e)}})),n=function(){if(p.result)try{t()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=Qt((function(t){p.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=o,r.advance=s,n(),e},t(r)}else t(null)}),u)}))},count:function(t){var e=t.query,n=t.trans,i=e.index,o=e.range;return new Promise((function(t,e){var s=n.objectStore(r),u=i.isPrimaryKey?s:s.index(i.name),c=a(o),l=c?u.count(c):u.count();l.onsuccess=Qt((function(e){return t(e.target.result)})),l.onerror=Qe(e)}))}}}(t)})),v={};return p.forEach((function(t){return v[t.name]=t})),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(t){if(!v[t])throw new Error("Table '"+t+"' not found");return v[t]},cmp:s,MIN_KEY:-1/0,MAX_KEY:Ge(i),schema:f}}function cn(e,n,r,i){var o=r.IDBKeyRange;return{dbcore:function(e,n){return n.reduce((function(e,n){var r=n.create;return t(t({},e),r(e))}),e)}(un(n,r.indexedDB,o,i),e.dbcore)}}function ln(t,e){var n=e.db,r=cn(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach((function(e){var n=e.name;t.core.schema.tables.some((function(t){return t.name===n}))&&(e.core=t.core.table(n),t[n]instanceof t.Table&&(t[n].core=e.core))}))}function hn(t,e,n,r){n.forEach((function(n){var i=r[n];e.forEach((function(e){var r=p(e,n);(!r||"value"in r&&void 0===r.value)&&(e===t.Transaction.prototype||e instanceof t.Transaction?h(e,n,{get:function(){return this.table(n)},set:function(t){l(this,n,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):e[n]=new t.Table(n,i))}))}))}function fn(t,e){e.forEach((function(e){for(var n in e)e[n]instanceof t.Table&&delete e[n]}))}function dn(t,e){return t._cfg.version-e._cfg.version}function pn(t,e,r,i){var o=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,o);s.create(r),s._completion.catch(i);var a=s._reject.bind(s),u=Tt.transless||Tt;re((function(){Tt.trans=s,Tt.transless=u,0===e?(n(o).forEach((function(t){yn(r,t,o[t].primKey,o[t].indexes)})),ln(t,r),Bt.follow((function(){return t.on.populate.fire(s)})).catch(a)):function(t,e,r,i){var o=[],s=t._versions,a=t._dbSchema=gn(t,t.idbdb,i),u=!1;function c(){return o.length?Bt.resolve(o.shift()(r.idbtrans)).then(c):Bt.resolve()}return s.filter((function(t){return t._cfg.version>=e})).forEach((function(s){o.push((function(){var o=a,c=s._cfg.dbschema;bn(t,o,i),bn(t,c,i),a=t._dbSchema=c;var l=vn(o,c);l.add.forEach((function(t){yn(i,t[0],t[1].primKey,t[1].indexes)})),l.change.forEach((function(t){if(t.recreate)throw new et.Upgrade("Not yet support for changing primary key");var e=i.objectStore(t.name);t.add.forEach((function(t){return mn(e,t)})),t.change.forEach((function(t){e.deleteIndex(t.name),mn(e,t)})),t.del.forEach((function(t){return e.deleteIndex(t)}))}));var h=s._cfg.contentUpgrade;if(h&&s._cfg.version>e){ln(t,i),r._memoizedTables={},u=!0;var f=S(c);l.del.forEach((function(t){f[t]=o[t]})),fn(t,[t.Transaction.prototype]),hn(t,[t.Transaction.prototype],n(f),f),r.schema=f;var d,p=F(h);p&&ie();var v=Bt.follow((function(){if((d=h(r))&&p){var t=oe.bind(null,null);d.then(t,t)}}));return d&&"function"==typeof d.then?Bt.resolve(d):v.then((function(){return d}))}})),o.push((function(e){u&&xe||function(t,e){for(var n=0;n<e.db.objectStoreNames.length;++n){var r=e.db.objectStoreNames[n];null==t[r]&&e.db.deleteObjectStore(r)}}(s._cfg.dbschema,e);fn(t,[t.Transaction.prototype]),hn(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),r.schema=t._dbSchema}))})),c().then((function(){var t,e;e=i,n(t=a).forEach((function(n){e.db.objectStoreNames.contains(n)||yn(e,n,t[n].primKey,t[n].indexes)}))}))}(t,e,s,r).catch(a)}))}function vn(t,e){var n,r={del:[],add:[],change:[]};for(n in t)e[n]||r.del.push(n);for(n in e){var i=t[n],o=e[n];if(i){var s={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!_e)s.recreate=!0,r.change.push(s);else{var a=i.idxByName,u=o.idxByName,c=void 0;for(c in a)u[c]||s.del.push(c);for(c in u){var l=a[c],h=u[c];l?l.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&r.change.push(s)}}else r.add.push([n,o])}return r}function yn(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(t){return mn(i,t)})),i}function mn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function gn(t,e,n){var r={};return y(e.objectStoreNames,0).forEach((function(t){for(var e=n.objectStore(t),i=e.keyPath,o=Ze(tn(i),i||"",!1,!1,!!e.autoIncrement,i&&"string"!=typeof i,!0),s=[],a=0;a<e.indexNames.length;++a){var u=e.index(e.indexNames[a]);i=u.keyPath;var c=Ze(u.name,i,!!u.unique,!!u.multiEntry,!1,i&&"string"!=typeof i,!1);s.push(c)}r[t]=en(t,o,s)})),r}function bn(t,e,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var s=r[o],a=n.objectStore(s);t._hasGetAll="getAll"in a;for(var u=0;u<a.indexNames.length;++u){var c=a.indexNames[u],l=a.index(c).keyPath,h="string"==typeof l?l:"["+y(l).join("+")+"]";if(e[s]){var f=e[s].idxByName[h];f&&(f.name=c,delete e[s].idxByName[h],e[s].idxByName[c]=f)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}var wn,_n=function(){function t(){}return t.prototype._parseStoresSpec=function(t,e){n(t).forEach((function(n){if(null!==t[n]){var i=t[n].split(",").map((function(t,e){var n=(t=t.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Ze(n,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),r(i),0===e)})),o=i.shift();if(o.multi)throw new et.Schema("Primary key cannot be multi-valued");i.forEach((function(t){if(t.auto)throw new et.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new et.Schema("Index must have a name and cannot be an empty string")})),e[n]=en(n,o,i)}}))},t.prototype.stores=function(t){var e=this.db;this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,t):t;var r=e._versions,i={},s={};return r.forEach((function(t){o(i,t._cfg.storesSource),s=t._cfg.dbschema={},t._parseStoresSpec(i,s)})),e._dbSchema=s,fn(e,[e._allTables,e,e.Transaction.prototype]),hn(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],n(s),s),e._storeNames=n(s),this},t.prototype.upgrade=function(t){return this._cfg.contentUpgrade=t,this},t}();function xn(t){return re((function(){return Tt.letThrough=!0,t()}))}function kn(t){var e=t._state,r=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then((function(){return e.dbOpenError?ye(e.dbOpenError):t}));q&&(e.openCanceller._stackHolder=L()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var i=e.dbReadyResolve,o=null;return Bt.race([e.openCanceller,new Bt((function(i,s){if(!r)throw new et.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var a=t.name,u=e.autoSchema?r.open(a):r.open(a,Math.round(10*t.verno));if(!u)throw new et.MissingAPI("IndexedDB API not available");u.onerror=Qe(s),u.onblocked=Qt(t._fireOnBlocked),u.onupgradeneeded=Qt((function(n){if(o=u.transaction,e.autoSchema&&!t._options.allowEmptyDB){u.onerror=Xe,o.abort(),u.result.close();var i=r.deleteDatabase(a);i.onsuccess=i.onerror=Qt((function(){s(new et.NoSuchDatabase("Database "+a+" doesnt exist"))}))}else{o.onerror=Qe(s);var c=n.oldVersion>Math.pow(2,62)?0:n.oldVersion;t.idbdb=u.result,pn(t,c/10,o,s)}}),s),u.onsuccess=Qt((function(){o=null;var r=t.idbdb=u.result,s=y(r.objectStoreNames);if(s.length>0)try{var c=r.transaction(Ye(s),"readonly");e.autoSchema?function(t,e,r){t.verno=e.version/10;var i=t._dbSchema=gn(0,e,r);t._storeNames=y(e.objectStoreNames,0),hn(t,[t._allTables],n(i),i)}(t,r,c):(bn(t,t._dbSchema,c),function(t,e){var n=vn(gn(0,t.idbdb,e),t._dbSchema);return!(n.add.length||n.change.some((function(t){return t.add.length||t.change.length})))}(t,c)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),ln(t,c)}catch(l){}we.push(t),r.onversionchange=Qt((function(n){e.vcFired=!0,t.on("versionchange").fire(n)})),wn.add(a),i()}),s)}))]).then((function(){return e.onReadyBeingFired=[],Bt.resolve(xn(t.on.ready.fire)).then((function t(){if(e.onReadyBeingFired.length>0){var n=e.onReadyBeingFired.reduce(ft,it);return e.onReadyBeingFired=[],Bt.resolve(xn(n)).then(t)}}))})).finally((function(){e.onReadyBeingFired=null})).then((function(){return e.isBeingOpened=!1,t})).catch((function(n){try{o&&o.abort()}catch(r){}return e.isBeingOpened=!1,t.close(),e.dbOpenError=n,ye(e.dbOpenError)})).finally((function(){e.openComplete=!0,i()}))}function Sn(t){var e=function(e){return t.next(e)},n=o(e),i=o((function(e){return t.throw(e)}));function o(t){return function(e){var o=t(e),s=o.value;return o.done?s:s&&"function"==typeof s.then?s.then(n,i):r(s)?Promise.all(s).then(n,i):n(s)}}return o(e)()}function Pn(t,e,n){var r=arguments.length;if(r<2)throw new et.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=E(i);return[t,o,n]}function En(t,e,n,r,i){return Bt.resolve().then((function(){var o=Tt.transless||Tt,s=t._createTransaction(e,n,t._dbSchema,r),a={trans:s,transless:o};r?s.idbtrans=r.idbtrans:s.create();var u,c=F(i);c&&ie();var l=Bt.follow((function(){if(u=i.call(s,s))if(c){var t=oe.bind(null,null);u.then(t,t)}else"function"==typeof u.next&&"function"==typeof u.throw&&(u=Sn(u))}),a);return(u&&"function"==typeof u.then?Bt.resolve(u).then((function(t){return s.active?t:ye(new et.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):l.then((function(){return u}))).then((function(t){return r&&s._resolve(),s._completion.then((function(){return t}))})).catch((function(t){return s._reject(t),ye(t)}))}))}function On(t,e,n){for(var i=r(t)?t.slice():[t],o=0;o<n;++o)i.push(e);return i}var An={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(n){var r=e.table(n),i=r.schema,o={},s=[];function a(e,n,r){var i=an(e),u=o[i]=o[i]||[],c=null==e?0:"string"==typeof e?1:e.length,l=n>0,h=t(t({},r),{isVirtual:l,isPrimaryKey:!l&&r.isPrimaryKey,keyTail:n,keyLength:c,extractKey:nn(e),unique:!l&&r.unique});(u.push(h),h.isPrimaryKey||s.push(h),c>1)&&a(2===c?e[0]:e.slice(0,c-1),n+1,r);return u.sort((function(t,e){return t.keyTail-e.keyTail})),h}var u=a(i.primaryKey.keyPath,0,i.primaryKey);o[":id"]=[u];for(var c=0,l=i.indexes;c<l.length;c++){var h=l[c];a(h.keyPath,0,h)}function f(n){var r,i,o=n.query.index;return o.isVirtual?t(t({},n),{query:{index:o,range:(r=n.query.range,i=o.keyTail,{type:1===r.type?2:r.type,lower:On(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:On(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):n}return t(t({},r),{schema:t(t({},i),{primaryKey:u,indexes:s,getIndexByKeyPath:function(t){var e=o[an(t)];return e&&e[0]}}),count:function(t){return r.count(f(t))},query:function(t){return r.query(f(t))},openCursor:function(t){var n=t.query.index,i=n.keyTail,o=n.isVirtual,s=n.keyLength;if(!o)return r.openCursor(t);return r.openCursor(f(t)).then((function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(On(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(On(n.key,t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(On(t,e.MAX_KEY,i),r)}},key:{get:function(){var t=n.key;return 1===s?t[0]:t.slice(0,s)}},value:{get:function(){return n.value}}})}(n)}))}})}})}},Cn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return t(t({},n),{table:function(r){var i=n.table(r),o=i.schema.primaryKey;return t(t({},i),{mutate:function(n){var s=Tt.trans,a=s.table(r).hook,c=a.deleting,l=a.creating,h=a.updating;switch(n.type){case"add":if(l.fire===it)break;return s._promise("readwrite",(function(){return f(n)}),!0);case"put":if(l.fire===it&&h.fire===it)break;return s._promise("readwrite",(function(){return f(n)}),!0);case"delete":if(c.fire===it)break;return s._promise("readwrite",(function(){return f(n)}),!0);case"deleteRange":if(c.fire===it)break;return s._promise("readwrite",(function(){return d((t=n).trans,t.range,1e4);var t}),!0)}return i.mutate(n);function f(n){var r=Tt.trans,s=n.keys||rn(o,n);if(!s)throw new Error("Keys missing");return"delete"!==(n="add"===n.type||"put"===n.type?t(t({},n),{keys:s,wantResults:!0}):t({},n)).type&&(n.values=e(n.values)),n.keys&&(n.keys=e(n.keys)),function(t,e,n){return"add"===e.type?Promise.resolve(new Array(e.values.length)):t.getMany({trans:e.trans,keys:n})}(i,n,s).then((function(t){var e=s.map((function(e,i){var s=t[i],a={onerror:null,onsuccess:null};if("delete"===n.type)c.fire.call(a,e,s,r);else if("add"===n.type||void 0===s){var f=l.fire.call(a,e,n.values[i],r);null==e&&null!=f&&(e=f,n.keys[i]=e,o.outbound||x(n.values[i],o.keyPath,e))}else{var d=I(s,n.values[i]),p=h.fire.call(a,d,e,s,r);if(p){var v=n.values[i];Object.keys(p).forEach((function(t){u(v,t)?v[t]=p[t]:x(v,t,p[t])}))}}return a}));return i.mutate(n).then((function(r){for(var i=r.failures,o=r.results,a=r.numFailures,u=r.lastResult,c=0;c<s.length;++c){var l=o?o[c]:s[c],h=e[c];null==l?h.onerror&&h.onerror(i[c]):h.onsuccess&&h.onsuccess("put"===n.type&&t[c]?n.values[c]:l)}return{failures:i,results:o,numFailures:a,lastResult:u}})).catch((function(t){return e.forEach((function(e){return e.onerror&&e.onerror(t)})),Promise.reject(t)}))}))}function d(e,n,r){return i.query({trans:e,values:!1,query:{index:o,range:n},limit:r}).then((function(i){var o=i.result;return f({type:"delete",keys:o,trans:e}).then((function(i){return i.numFailures>0?Promise.reject(i.failures[0]):o.length<r?{failures:[],numFailures:0,lastResult:void 0}:d(e,t(t({},n),{lower:o[o.length-1],lowerOpen:!0}),r)}))}))}}})}})}},jn=function(){function e(n,r){var i=this;this._middlewares={},this.verno=0;var o=e.dependencies;this._options=r=t({addons:e.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var s=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var a,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:it,dbReadyPromise:null,cancelOpen:it,openCanceller:null,autoSchema:!0};u.dbReadyPromise=new Bt((function(t){u.dbReadyResolve=t})),u.openCanceller=new Bt((function(t,e){u.cancelOpen=e})),this._state=u,this.name=n,this.on=Ce(this,"populate","blocked","versionchange",{ready:[ft,it]}),this.on.ready.subscribe=m(this.on.ready.subscribe,(function(t){return function(n,r){e.vip((function(){var e=i._state;if(e.openComplete)e.dbOpenError||Bt.resolve().then(n),r&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),r&&t(n);else{t(n);var o=i;r||t((function t(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(t)}))}}))}})),this.Collection=(a=this,je(Me.prototype,(function(t,e){this.db=a;var n=Ee,r=null;if(e)try{n=e()}catch(u){r=u}var i=t._ctx,o=i.table,s=o.hook.reading.fire;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:s!==ot?s:null}}))),this.Table=function(t){return je(Ae.prototype,(function(e,n,r){this.db=t,this._tx=r,this.name=e,this.schema=n,this.hook=t._allTables[e]?t._allTables[e].hook:Ce(null,{creating:[ut,it],reading:[st,ot],updating:[lt,it],deleting:[ct,it]})}))}(this),this.Transaction=function(t){return je(Je.prototype,(function(e,n,r,i){var o=this;this.db=t,this.mode=e,this.storeNames=n,this.schema=r,this.idbtrans=null,this.on=Ce(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Bt((function(t,e){o._resolve=t,o._reject=e})),this._completion.then((function(){o.active=!1,o.on.complete.fire()}),(function(t){var e=o.active;return o.active=!1,o.on.error.fire(t),o.parent?o.parent._reject(t):e&&o.idbtrans&&o.idbtrans.abort(),ye(t)}))}))}(this),this.Version=function(t){return je(_n.prototype,(function(e){this.db=t,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(t){return je(We.prototype,(function(e,n,r){this.db=t,this._ctx={table:e,index:":id"===n?null:n,or:r};var i=t._deps.indexedDB;if(!i)throw new et.MissingAPI("indexedDB API missing");this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(t,e){return i.cmp(e,t)},this._max=function(t,e){return i.cmp(t,e)>0?t:e},this._min=function(t,e){return i.cmp(t,e)<0?t:e},this._IDBKeyRange=t._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '"+i.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+i.name+"'. Closing db now to resume the delete request."),i.close()})),this.on("blocked",(function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('"+i.name+"') was blocked"):console.warn("Upgrade '"+i.name+"' blocked by other connection holding version "+t.oldVersion/10)})),this._maxKey=Ge(r.IDBKeyRange),this._createTransaction=function(t,e,n,r){return new i.Transaction(t,e,n,r)},this._fireOnBlocked=function(t){i.on("blocked").fire(t),we.filter((function(t){return t.name===i.name&&t!==i&&!t._state.vcFired})).map((function(e){return e.on("versionchange").fire(t)}))},this.use(An),this.use(Cn),s.forEach((function(t){return t(i)}))}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new et.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new et.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=this._versions,n=e.filter((function(e){return e._cfg.version===t}))[0];return n||(n=new this.Version(t),e.push(n),e.sort(dn),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(t){var e=this;return this._state.openComplete||Tt.letThrough?t():new Bt((function(t,n){if(!e._state.isBeingOpened){if(!e._options.autoOpen)return void n(new et.DatabaseClosed);e.open().catch(it)}e._state.dbReadyPromise.then(t,n)})).then(t)},e.prototype.use=function(t){var e=t.stack,n=t.create,r=t.level,i=t.name;i&&this.unuse({stack:e,name:i});var o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:n,level:null==r?10:r,name:i}),o.sort((function(t,e){return t.level-e.level})),this},e.prototype.unuse=function(t){var e=t.stack,n=t.name,r=t.create;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((function(t){return r?t.create!==r:!!n&&t.name!==n}))),this},e.prototype.open=function(){return kn(this)},e.prototype.close=function(){var t=we.indexOf(this),e=this._state;if(t>=0&&we.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(n){}this.idbdb=null}this._options.autoOpen=!1,e.dbOpenError=new et.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError),e.dbReadyPromise=new Bt((function(t){e.dbReadyResolve=t})),e.openCanceller=new Bt((function(t,n){e.cancelOpen=n}))},e.prototype.delete=function(){var t=this,e=arguments.length>0,n=this._state;return new Bt((function(r,i){var o=function(){t.close();var e=t._deps.indexedDB.deleteDatabase(t.name);e.onsuccess=Qt((function(){wn.remove(t.name),r()})),e.onerror=Qe(i),e.onblocked=t._fireOnBlocked};if(e)throw new et.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return n(this._allTables).map((function(e){return t._allTables[e]}))},enumerable:!0,configurable:!0}),e.prototype.transaction=function(){var t=Pn.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,e,n){var r=this,i=Tt.trans;i&&i.db===this&&-1===t.indexOf("!")||(i=null);var o,s,a=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{if(s=e.map((function(t){var e=t instanceof r.Table?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e})),"r"==t||"readonly"===t)o="readonly";else{if("rw"!=t&&"readwrite"!=t)throw new et.InvalidArgument("Invalid transaction mode: "+t);o="readwrite"}if(i){if("readonly"===i.mode&&"readwrite"===o){if(!a)throw new et.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&s.forEach((function(t){if(i&&-1===i.storeNames.indexOf(t)){if(!a)throw new et.SubTransaction("Table "+t+" not included in parent transaction.");i=null}})),a&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(function(t,e){e(c)})):ye(c)}var u=En.bind(null,this,o,s,i,n);return i?i._promise(o,u,"lock"):Tt.trans?he(Tt.transless,(function(){return r._whenReady(u)})):this._whenReady(u)},e.prototype.table=function(t){if(!u(this._allTables,t))throw new et.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),Tn=jn;c(Tn,t(t({},rt),{delete:function(t){return new Tn(t).delete()},exists:function(t){return new Tn(t,{addons:[]}).open().then((function(t){return t.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(t){return wn?wn.getDatabaseNames().then(t):Bt.resolve([])},defineClass:function(){return function(t){o(this,t)}},ignoreTransaction:function(t){return Tt.trans?he(Tt.transless,t):t()},vip:xn,async:function(t){return function(){try{var e=Sn(t.apply(this,arguments));return e&&"function"==typeof e.then?e:Bt.resolve(e)}catch(n){return ye(n)}}},spawn:function(t,e,n){try{var r=Sn(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:Bt.resolve(r)}catch(i){return ye(i)}},currentTransaction:{get:function(){return Tt.trans||null}},waitFor:function(t,e){var n=Bt.resolve("function"==typeof t?Tn.ignoreTransaction(t):t).timeout(e||6e4);return Tt.trans?Tt.trans.waitFor(n):n},Promise:Bt,debug:{get:function(){return q},set:function(t){U(t,"dexie"===t?function(){return!0}:Se)}},derive:f,extend:o,props:c,override:m,Events:Ce,getByKeyPath:_,setByKeyPath:x,delByKeyPath:k,shallowClone:S,deepClone:j,getObjectDiff:I,asap:b,minKey:-(1/0),addons:[],connections:we,errnames:Z,dependencies:function(){try{return{indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(t){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"3.0.3",version:"3.0.3".split(".").map((function(t){return parseInt(t)})).reduce((function(t,e,n){return t+e/Math.pow(10,2*n)})),default:Tn,Dexie:Tn})),Tn.maxKey=Ge(Tn.dependencies.IDBKeyRange),function(t){try{wn=function(t){var e,n=t&&"function"==typeof t.databases;if(!n){var r=new jn("__dbnames",{addons:[]});r.version(1).stores({dbnames:"name"}),e=r.table("dbnames")}return{getDatabaseNames:function(){return n?Bt.resolve(t.databases()).then((function(t){return t.map((function(t){return t.name})).filter((function(t){return"__dbnames"!==t}))})):e.toCollection().primaryKeys()},add:function(t){return!n&&"__dbnames"!==t&&e.put({name:t}).catch(it)},remove:function(t){return!n&&"__dbnames"!==t&&e.delete(t).catch(it)}}}(t)}catch(e){}}(jn.dependencies.indexedDB),Bt.rejectionMapper=function(t,e){if(!t||t instanceof G||t instanceof TypeError||t instanceof SyntaxError||!t.name||!nt[t.name])return t;var n=new nt[t.name](e||t.message,t);return"stack"in t&&h(n,"stack",{get:function(){return this.inner.stack}}),n},U(q,Se);
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Kn=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Rn=Symbol();class In{constructor(t,e){if(e!==Rn)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return Kn&&void 0===this.t&&(this.t=new CSSStyleSheet,this.t.replaceSync(this.cssText)),this.t}toString(){return this.cssText}}const Bn=new Map,Dn=t=>(t=>{let e=Bn.get(t);return void 0===e&&Bn.set(t,e=new In(t,Rn)),e})("string"==typeof t?t:t+""),Nn=Kn?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return Dn(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var Mn,Fn,qn,Un;const Hn={toAttribute(t,e){switch(e){case Boolean:t=t?"":null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch(r){n=null}}return n}},$n=(t,e)=>e!==t&&(e==e||t==t),Ln={attribute:!0,type:String,converter:Hn,reflect:!1,hasChanged:$n};class zn extends HTMLElement{constructor(){super(),this.Πi=new Map,this.Πo=void 0,this.Πl=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this.Πh=null,this.u()}static addInitializer(t){var e;null!==(e=this.v)&&void 0!==e||(this.v=[]),this.v.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,n)=>{const r=this.Πp(n,e);void 0!==r&&(this.Πm.set(r,n),t.push(r))})),t}static createProperty(t,e=Ln){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const n="symbol"==typeof t?Symbol():"__"+t,r=this.getPropertyDescriptor(t,n,e);void 0!==r&&Object.defineProperty(this.prototype,t,r)}}static getPropertyDescriptor(t,e,n){return{get(){return this[e]},set(r){const i=this[t];this[e]=r,this.requestUpdate(t,i,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||Ln}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this.Πm=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const n of e)this.createProperty(n,t[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(Nn(t))}else void 0!==t&&e.push(Nn(t));return e}static"Πp"(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this.Πg=new Promise((t=>this.enableUpdating=t)),this.L=new Map,this.Π_(),this.requestUpdate(),null===(t=this.constructor.v)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,n;(null!==(e=this.ΠU)&&void 0!==e?e:this.ΠU=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(n=t.hostConnected)||void 0===n||n.call(t))}removeController(t){var e;null===(e=this.ΠU)||void 0===e||e.splice(this.ΠU.indexOf(t)>>>0,1)}"Π_"(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this.Πi.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{Kn?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const n=document.createElement("style");n.textContent=e.cssText,t.appendChild(n)}))})(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this.ΠU)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)})),this.Πl&&(this.Πl(),this.Πo=this.Πl=void 0)}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this.ΠU)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)})),this.Πo=new Promise((t=>this.Πl=t))}attributeChangedCallback(t,e,n){this.K(t,n)}"Πj"(t,e,n=Ln){var r,i;const o=this.constructor.Πp(t,n);if(void 0!==o&&!0===n.reflect){const s=(null!==(i=null===(r=n.converter)||void 0===r?void 0:r.toAttribute)&&void 0!==i?i:Hn.toAttribute)(e,n.type);this.Πh=t,null==s?this.removeAttribute(o):this.setAttribute(o,s),this.Πh=null}}K(t,e){var n,r,i;const o=this.constructor,s=o.Πm.get(t);if(void 0!==s&&this.Πh!==s){const t=o.getPropertyOptions(s),a=t.converter,u=null!==(i=null!==(r=null===(n=a)||void 0===n?void 0:n.fromAttribute)&&void 0!==r?r:"function"==typeof a?a:null)&&void 0!==i?i:Hn.fromAttribute;this.Πh=s,this[s]=u(e,t.type),this.Πh=null}}requestUpdate(t,e,n){let r=!0;void 0!==t&&(((n=n||this.constructor.getPropertyOptions(t)).hasChanged||$n)(this[t],e)?(this.L.has(t)||this.L.set(t,e),!0===n.reflect&&this.Πh!==t&&(void 0===this.Πk&&(this.Πk=new Map),this.Πk.set(t,n))):r=!1),!this.isUpdatePending&&r&&(this.Πg=this.Πq())}async"Πq"(){this.isUpdatePending=!0;try{for(await this.Πg;this.Πo;)await this.Πo}catch(e){Promise.reject(e)}const t=this.performUpdate();return null!=t&&await t,!this.isUpdatePending}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this.Πi&&(this.Πi.forEach(((t,e)=>this[e]=t)),this.Πi=void 0);let e=!1;const n=this.L;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),null===(t=this.ΠU)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(n)):this.Π$()}catch(r){throw e=!1,this.Π$(),r}e&&this.E(n)}willUpdate(t){}E(t){var e;null===(e=this.ΠU)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}"Π$"(){this.L=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this.Πg}shouldUpdate(t){return!0}update(t){void 0!==this.Πk&&(this.Πk.forEach(((t,e)=>this.Πj(e,this[e],t))),this.Πk=void 0),this.Π$()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Vn,Wn,Yn,Gn;zn.finalized=!0,zn.elementProperties=new Map,zn.elementStyles=[],zn.shadowRootOptions={mode:"open"},null===(Fn=(Mn=globalThis).reactiveElementPlatformSupport)||void 0===Fn||Fn.call(Mn,{ReactiveElement:zn}),(null!==(qn=(Un=globalThis).reactiveElementVersions)&&void 0!==qn?qn:Un.reactiveElementVersions=[]).push("1.0.0-rc.2");const Qn=globalThis.trustedTypes,Xn=Qn?Qn.createPolicy("lit-html",{createHTML:t=>t}):void 0,Jn=`lit$${(Math.random()+"").slice(9)}$`,Zn="?"+Jn,tr=`<${Zn}>`,er=document,nr=(t="")=>er.createComment(t),rr=t=>null===t||"object"!=typeof t&&"function"!=typeof t,ir=Array.isArray,or=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,sr=/-->/g,ar=/>/g,ur=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,cr=/'/g,lr=/"/g,hr=/^(?:script|style|textarea)$/i,fr=(mr=1,(t,...e)=>({_$litType$:mr,strings:t,values:e})),dr=Symbol.for("lit-noChange"),pr=Symbol.for("lit-nothing"),vr=new WeakMap,yr=er.createTreeWalker(er,129,null,!1);var mr,gr,br,wr,_r,xr,kr;class Sr{constructor({strings:t,_$litType$:e},n){let r;this.parts=[];let i=0,o=0;const s=t.length-1,a=this.parts,[u,c]=((t,e)=>{const n=t.length-1,r=[];let i,o=2===e?"<svg>":"",s=or;for(let u=0;u<n;u++){const e=t[u];let n,a,c=-1,l=0;for(;l<e.length&&(s.lastIndex=l,a=s.exec(e),null!==a);)l=s.lastIndex,s===or?"!--"===a[1]?s=sr:void 0!==a[1]?s=ar:void 0!==a[2]?(hr.test(a[2])&&(i=RegExp("</"+a[2],"g")),s=ur):void 0!==a[3]&&(s=ur):s===ur?">"===a[0]?(s=null!=i?i:or,c=-1):void 0===a[1]?c=-2:(c=s.lastIndex-a[2].length,n=a[1],s=void 0===a[3]?ur:'"'===a[3]?lr:cr):s===lr||s===cr?s=ur:s===sr||s===ar?s=or:(s=ur,i=void 0);const h=s===ur&&t[u+1].startsWith("/>")?" ":"";o+=s===or?e+tr:c>=0?(r.push(n),e.slice(0,c)+"$lit$"+e.slice(c)+Jn+h):e+Jn+(-2===c?(r.push(void 0),u):h)}const a=o+(t[n]||"<?>")+(2===e?"</svg>":"");return[void 0!==Xn?Xn.createHTML(a):a,r]})(t,e);if(this.el=Sr.createElement(u,n),yr.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(r=yr.nextNode())&&a.length<s;){if(1===r.nodeType){if(r.hasAttributes()){const t=[];for(const e of r.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(Jn)){const n=c[o++];if(t.push(e),void 0!==n){const t=r.getAttribute(n.toLowerCase()+"$lit$").split(Jn),e=/([.?@])?(.*)/.exec(n);a.push({type:1,index:i,name:e[2],strings:t,ctor:"."===e[1]?Cr:"?"===e[1]?jr:"@"===e[1]?Tr:Ar})}else a.push({type:6,index:i})}for(const e of t)r.removeAttribute(e)}if(hr.test(r.tagName)){const t=r.textContent.split(Jn),e=t.length-1;if(e>0){r.textContent=Qn?Qn.emptyScript:"";for(let n=0;n<e;n++)r.append(t[n],nr()),yr.nextNode(),a.push({type:2,index:++i});r.append(t[e],nr())}}}else if(8===r.nodeType)if(r.data===Zn)a.push({type:2,index:i});else{let t=-1;for(;-1!==(t=r.data.indexOf(Jn,t+1));)a.push({type:7,index:i}),t+=Jn.length-1}i++}}static createElement(t,e){const n=er.createElement("template");return n.innerHTML=t,n}}function Pr(t,e,n=t,r){var i,o,s,a;if(e===dr)return e;let u=void 0!==r?null===(i=n.Σi)||void 0===i?void 0:i[r]:n.Σo;const c=rr(e)?void 0:e._$litDirective$;return(null==u?void 0:u.constructor)!==c&&(null===(o=null==u?void 0:u.O)||void 0===o||o.call(u,!1),void 0===c?u=void 0:(u=new c(t),u.T(t,n,r)),void 0!==r?(null!==(s=(a=n).Σi)&&void 0!==s?s:a.Σi=[])[r]=u:n.Σo=u),void 0!==u&&(e=Pr(t,u.S(t,e.values),u,r)),e}class Er{constructor(t,e){this.l=[],this.N=void 0,this.D=t,this.M=e}u(t){var e;const{el:{content:n},parts:r}=this.D,i=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:er).importNode(n,!0);yr.currentNode=i;let o=yr.nextNode(),s=0,a=0,u=r[0];for(;void 0!==u;){if(s===u.index){let e;2===u.type?e=new Or(o,o.nextSibling,this,t):1===u.type?e=new u.ctor(o,u.name,u.strings,this,t):6===u.type&&(e=new Kr(o,this,t)),this.l.push(e),u=r[++a]}s!==(null==u?void 0:u.index)&&(o=yr.nextNode(),s++)}return i}v(t){let e=0;for(const n of this.l)void 0!==n&&(void 0!==n.strings?(n.I(t,n,e),e+=n.strings.length-2):n.I(t[e])),e++}}class Or{constructor(t,e,n,r){this.type=2,this.N=void 0,this.A=t,this.B=e,this.M=n,this.options=r}setConnected(t){var e;null===(e=this.P)||void 0===e||e.call(this,t)}get parentNode(){return this.A.parentNode}get startNode(){return this.A}get endNode(){return this.B}I(t,e=this){t=Pr(this,t,e),rr(t)?t===pr||null==t||""===t?(this.H!==pr&&this.R(),this.H=pr):t!==this.H&&t!==dr&&this.m(t):void 0!==t._$litType$?this._(t):void 0!==t.nodeType?this.$(t):(t=>{var e;return ir(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])})(t)?this.g(t):this.m(t)}k(t,e=this.B){return this.A.parentNode.insertBefore(t,e)}$(t){this.H!==t&&(this.R(),this.H=this.k(t))}m(t){const e=this.A.nextSibling;null!==e&&3===e.nodeType&&(null===this.B?null===e.nextSibling:e===this.B.previousSibling)?e.data=t:this.$(er.createTextNode(t)),this.H=t}_(t){var e;const{values:n,_$litType$:r}=t,i="number"==typeof r?this.C(t):(void 0===r.el&&(r.el=Sr.createElement(r.h,this.options)),r);if((null===(e=this.H)||void 0===e?void 0:e.D)===i)this.H.v(n);else{const t=new Er(i,this),e=t.u(this.options);t.v(n),this.$(e),this.H=t}}C(t){let e=vr.get(t.strings);return void 0===e&&vr.set(t.strings,e=new Sr(t)),e}g(t){ir(this.H)||(this.H=[],this.R());const e=this.H;let n,r=0;for(const i of t)r===e.length?e.push(n=new Or(this.k(nr()),this.k(nr()),this,this.options)):n=e[r],n.I(i),r++;r<e.length&&(this.R(n&&n.B.nextSibling,r),e.length=r)}R(t=this.A.nextSibling,e){var n;for(null===(n=this.P)||void 0===n||n.call(this,!1,!0,e);t&&t!==this.B;){const e=t.nextSibling;t.remove(),t=e}}}class Ar{constructor(t,e,n,r,i){this.type=1,this.H=pr,this.N=void 0,this.V=void 0,this.element=t,this.name=e,this.M=r,this.options=i,n.length>2||""!==n[0]||""!==n[1]?(this.H=Array(n.length-1).fill(pr),this.strings=n):this.H=pr}get tagName(){return this.element.tagName}I(t,e=this,n,r){const i=this.strings;let o=!1;if(void 0===i)t=Pr(this,t,e,0),o=!rr(t)||t!==this.H&&t!==dr,o&&(this.H=t);else{const r=t;let s,a;for(t=i[0],s=0;s<i.length-1;s++)a=Pr(this,r[n+s],e,s),a===dr&&(a=this.H[s]),o||(o=!rr(a)||a!==this.H[s]),a===pr?t=pr:t!==pr&&(t+=(null!=a?a:"")+i[s+1]),this.H[s]=a}o&&!r&&this.W(t)}W(t){t===pr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class Cr extends Ar{constructor(){super(...arguments),this.type=3}W(t){this.element[this.name]=t===pr?void 0:t}}class jr extends Ar{constructor(){super(...arguments),this.type=4}W(t){t&&t!==pr?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}}class Tr extends Ar{constructor(){super(...arguments),this.type=5}I(t,e=this){var n;if((t=null!==(n=Pr(this,t,e,0))&&void 0!==n?n:pr)===dr)return;const r=this.H,i=t===pr&&r!==pr||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,o=t!==pr&&(r===pr||i);i&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,t),this.H=t}handleEvent(t){var e,n;"function"==typeof this.H?this.H.call(null!==(n=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==n?n:this.element,t):this.H.handleEvent(t)}}class Kr{constructor(t,e,n){this.element=t,this.type=6,this.N=void 0,this.V=void 0,this.M=e,this.options=n}I(t){Pr(this,t)}}null===(Wn=(Vn=globalThis).litHtmlPlatformSupport)||void 0===Wn||Wn.call(Vn,Sr,Or),(null!==(Yn=(Gn=globalThis).litHtmlVersions)&&void 0!==Yn?Yn:Gn.litHtmlVersions=[]).push("2.0.0-rc.3"),(null!==(gr=(kr=globalThis).litElementVersions)&&void 0!==gr?gr:kr.litElementVersions=[]).push("3.0.0-rc.2");class Rr extends zn{constructor(){super(...arguments),this.renderOptions={host:this},this.Φt=void 0}createRenderRoot(){var t,e;const n=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=n.firstChild),n}update(t){const e=this.render();super.update(t),this.Φt=((t,e,n)=>{var r,i;const o=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:e;let s=o._$litPart$;if(void 0===s){const t=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:null;o._$litPart$=s=new Or(e.insertBefore(nr(),t),t,void 0,n)}return s.I(t),s})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this.Φt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this.Φt)||void 0===t||t.setConnected(!1)}render(){return dr}}Rr.finalized=!0,Rr._$litElement$=!0,null===(wr=(br=globalThis).litElementHydrateSupport)||void 0===wr||wr.call(br,{LitElement:Rr}),null===(xr=(_r=globalThis).litElementPlatformSupport)||void 0===xr||xr.call(_r,{LitElement:Rr});export{jn as D,fr as T,Rr as h};
